{
	"Primary" : 
	[
		{
			"connection-id": "snoc-r4",
			"schema-name": "snoc_report",
			"collection-name": "org_addnl_params",
			
			"map-key" : 
			{
				"key" : "org_id",
				"type" : "Long",
				"local-key" : "org_id"
			},
			"projection": 
			{
				"org_id" : 1,
				"chnl_ctgr" : 1
			},
			"parameters": 
			[				
				{
					"param-name": "chnl_ctgr",
					"param-value": "$chnl_ctgr",
					"mandatory" : "false"
				}
			],
			"sort-by": 
			{
				"org_id": 1
			},
			"batch-size" : 100
		},
		{
			"connection-id": "snoc-r4",
			"schema-name": "snoc_report",
			"collection-name": "org_user_node_acc",
			
			"projection": 
			{
				"org_id": 1,
				"first_name" : 1,
				"last_name" : 1,
				"org_ref_code" : 1
			},
			"map-key" : 
			{
				"key" : ["data.org_id"],
				"type" : "Long",
				"local-key" : ["org_id"]
			},
			"parameters": 
			[
				{
					"param-name": "nasional",
					"param-value": "$nasional"
				},
				{
					"param-name": "regional",
					"param-value": "$regional",
					"mandatory" : "false"
				},
				{
					"param-name": "area",
					"param-value": "$area",
					"mandatory" : "false"
				},
				{
					"param-name": "sales_area",
					"param-value": "$sales_area",
					"mandatory" : "false"
				},
				{
					"param-name": "cluster",
					"param-value": "$cluster",
					"mandatory" : "false"
				},
				{
					"param-name": "micro_cluster",
					"param-value": "$micro_cluster",
					"mandatory" : "false"
				}

			],
			"sort-by": 
			{
				"org_id": 1
			},
			"batch-size" : 100,
			"merge-type" : "include_parent"
		},
		{
			"connection-id": "snoc-r1",
			"schema-name": "order",
			"collection-name": "inventory_orders",
			
			"projection": 
			{
				"data.org_id" : 1,
				"ord_delivery_dt" : 1,
				"ord_id" : 1,
				"ord_master_id" : 1,
				"status" : 1,
				"data.ord_items" : 1
			},
			"map-key" : 
			{
				"key" : ["ord_master_id"],
				"type" : "Long",
				"local-key" : ["ord_master_id"]
			},

			"parameters": 
			[
				{
					"param-name" : "status",
					"param-value" : "$status",
					"param-type" : "Long",
					"mandatory" : "false"
				},
				{
					"param-name" : "ord_creatd_dt",
					"param-value" : [
						"$start_date",
						"$end-date"
					],
					"param-type" : "date",
					"from-date-format" : "yyyy-MM-dd HH:mm:ss.SSS",
					"to-date-format" : "yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"
				}
			],
			"alias" :
			{
				"data.ord_items" : "inv_ord_items"
			},
			"sort-by": 
			{
				"data.org_id": 1,
				"ord_master_id" : 1
			},
			"batch-size" : 100,
			"merge-type" : "include_parent"
		},
		{
			"connection-id": "snoc-r1",
			"schema-name": "order",
			"collection-name": "order_master",
			
			"projection": 
			{
				"ord_master_id" : 1,
				"data" : 1
			},
			"parameters": 
			[
				{
					"param-name": "data.envelope.payload.orders.order.addnl_param.do_id",
					"param-value": "$do_id",
					"mandatory" : "false"
				}
			],
			"alias" :
			{
				"data" : "master_data"
			},
			"sort-by": 
			{
				"ord_master_id" : 1
			},
			"batch-size" : 100,
			"merge-type" : "include_parent"
		}
	],
	"Lookup": 
	{
		"genericMasterValueCollection": 
		{
			"connection-id": "snoc-r1",
			"schema-name": "snoc",
			"collection-name": "genericMasterValueCollection"
		},
		"invoice_orders": 
		{
			"connection-id": "snoc-r4",
			"schema-name": "snoc_report",
			"collection-name": "invoice_orders"
		}
	},
	"Configuration" : 
	{
		"do_id" : 
		{
			"field" : "do_id"
		},
		"ord_delivery_dt" :	
		{
			"field" : "ord_delivery_dt",
			"date-format": "dd-MMM-yyyy"
		},
		"org_ref_code" :
		{
			"field" : "org_ref_code"
		},
		"org_name" :
		{
			"field" : "",
			"append" : 
			[
				"first_name",
				"last_name"
			],
			"field-delimiter" : " "
		},
		"prd_ctgr_nm" :
		{
			"field" : "data.inv_ord_items.prd_ctgr_nm"
		},
		"skuCode" :
		{
			"field" : "data.inv_ord_items.skuCode"
		},
		"prd_nm" : 
		{
			"field" : "data.inv_ord_items.prd_nm"
		},
		"exp_date" : 
		{
			"field" : "master_data.envelope.payload.orders.order.ord_items.batch_dtls.exp_date",
			"date-format": "dd-MMM-yyyy"
		},
		"exp_qty" : 
		{
			"field" : "master_data.envelope.payload.orders.order.ord_items.batch_dtls",
			"fetch-on-condition" : 
			[
				{
					"cond-field" : "master_data.envelope.payload.orders.order.ord_items.batch_dtls.exp_date",
					"cond-value" : "",
					"cond-operation" : "not-equals"
				}	
			],
			"fetch-field" : "qty"
		},
		"non_exp_qty" : 
		{
			"field" : "master_data.envelope.payload.orders.order.ord_items.batch_dtls",
			"fetch-on-condition" : 
			[
				{
					"cond-field" : "master_data.envelope.payload.orders.order.ord_items.batch_dtls.exp_date",
					"cond-value" : "",
					"cond-operation" : "equals"
				}	
			],
			"fetch-field" : "qty"
		},
		"status" :
		{
			"field" : "status",
			"lookup": 
			[
				{
					"name": "genericMasterValueCollection",
					"mapping-field": "s_id",
					"lookup-field": "description"
				}
			]
		},
		"approval_date_time" : 
		{
			"field" : "ord_id",
			"lookup": 
			[
				{
					"name": "invoice_orders",
					"mapping-field": "ord_id",
					"lookup-field": "appr_at"
				}
			],
			"date-format": "dd-MMM-yyyy HH:mm:ss"
		},
		"approval_user_name" : 
		{
			"field" : "ord_id",
			"lookup": 
			[
				{
					"name": "invoice_orders",
					"mapping-field": "ord_id",
					"lookup-field": "appr_by"
				}
			]
		},
		"approval_operator_name" :
		{
			"field" : "ord_id",
			"lookup": 
			[
				{
					"name": "invoice_orders",
					"mapping-field": "ord_id",
					"lookup-field": "appr_by_optr_nm"
				}
			]
		}		
	},
	"OutputConf" :
	{
		"type" : "file",
		"extension": "xls",
		"file-path": "/home/appuser/file_job/job",
		"file-name" : "FOSSApprovalMonitoringReport",
		"file-name-pattern" : "yyyyMMdd",
		"file-headers" : "DO_ID,DELIVERY DATE,SALDOMOBOSHORTCODE,ORGANIZATION NAME,PRODUCT CATEGORY,PRODUCT CODE,PRODUCT NAME,EXPIRED DATE,TOTAL EXPIRED QTY,TOTAL NON EXPIRED QTY,STATUS,APPROVALDATETIME,APPROVAL USER NAME,APPROVAL FULL OPERATOR NAME",
		"field-delimiter" : ",",
		"field-conf" : 
		[
			{
				"path" : "do_id",
				"type" : "String"
			},
			{
				"path" : "ord_delivery_dt",
				"type" : "String"
			},
			{
				"path" : "org_ref_code",
				"type" : "String"
			},
			{
				"path" : "org_name",
				"type" : "String"
			},
			{
				"path" : "prd_ctgr_nm",
				"type" : "String"
			},
			{
				"path" : "skuCode",
				"type" : "String"
			},
			{
				"path" : "prd_nm",
				"type" : "String"
			},
			{
				"path" : "exp_date",
				"type" : "String"
			},
			{
				"path" : "exp_qty",
				"type" : "String"
			},
			{
				"path" : "non_exp_qty",
				"type" : "String"
			},
			{
				"path" : "status",
				"type" : "String"
			},
			{
				"path" : "approval_date_time",
				"type" : "String"
			},
			{
				"path" : "approval_user_name",
				"type" : "String"
			},
			{
				"path" : "approval_operator_name",
				"type" : "String"
			}
		]
	},
	"SortConf" : 
	{
		"extension" : "csv",
		"file-name-pattern" : "yyyyMMddHHmmssSSS",
		"file-path" : "/home/appuser/file_job/sort/",
		"field-delimiter" : "|",
		"sort-filepath_0" : "/home/appuser/file_job/sort/collection2.sh",
		"sort-filepath_1" : "/home/appuser/file_job/sort/collection1.sh",
		"sort-filepath_2" : "/home/appuser/file_job/sort/collection1.sh",
		"sort-filepath_3" : "/home/appuser/file_job/sort/collection1.sh"

	}
}